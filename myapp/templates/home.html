{% extends "base.html" %}
{% load static %}

{% block title %}Home Page{% endblock %}

{% block content %}
<style>
  body {
    background: linear-gradient(135deg, #f8f9fa, #e9ecef);
  }
  .card {
    border-radius: 12px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.15);
    transition: transform 0.3s ease;
  }
  .card:hover {
    transform: translateY(-8px);
    box-shadow: 0 16px 24px rgba(0,0,0,0.25);
  }
  .card-img-top {
    width: 100%;
    height: 250px;
    object-fit: cover;
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
  }
  .btn-primary {
    background-color: #007bff;
    border: none;
    border-radius: 8px;
  }
  .btn-primary:hover {
    background-color: #0056b3;
  }
  .form-control {
    border-radius: 25px;
  }
  .form-inline {
    display: flex;
    justify-content: center;
    margin-bottom: 30px;
  }
</style>

<div class="container mt-4">
  <h2 class="mb-4 text-center">Our Team</h2>

  <form method="get" class="form-inline justify-content-center mb-4">
    <input type="text" name="q" class="form-control mr-2" placeholder="Search employees..." value="{{ query }}">
    <button type="submit" class="btn btn-outline-primary">Search</button>
  </form>

  {% if employees|length == 0 %}
    <p class="text-center">No employees found.</p>
  {% endif %}

  <div class="row">
    {% for employee in employees %}
      <div class="col-md-4 mb-4">
        <div class="card h-100">
          <img src="{% static employee.photo %}" class="card-img-top" alt="{{ employee.name }}">
          <div class="card-body">
            <h5 class="card-title">
              {% with query|lower as q %}
                {% if q and q in employee.name|lower %}
                  <span class="bg-warning px-1">{{ employee.name }}</span>
                {% else %}
                  {{ employee.name }}
                {% endif %}
              {% endwith %}
            </h5>
            <button class="btn btn-primary" data-toggle="collapse" data-target="#info{{ forloop.counter }}" aria-expanded="false" aria-controls="info{{ forloop.counter }}">
              View Info
            </button>
            <div id="info{{ forloop.counter }}" class="collapse mt-3">
              <p><strong>Position:</strong> {{ employee.position }}</p>
              <p><strong>Email:</strong> {{ employee.email }}</p>
              <p><strong>Phone:</strong> {{ employee.phone }}</p>
              <p><strong>Age:</strong> {{ employee.age }}</p>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const highlighted = document.querySelector(".bg-warning");
    if (highlighted) {
      highlighted.scrollIntoView({ behavior: "smooth", block: "center" });
    }
  });
</script>
{% endblock %}
